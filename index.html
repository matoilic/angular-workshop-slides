<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>AngularJS Foundation</title>

        <meta name="author" content="ti&amp;m AG, Stefan Zollinger">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
        <link href='http://fonts.googleapis.com/css?family=Roboto:300,700,400,100' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/ti8m.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <div class="slides">
                <section class="splash">
                    <h1>AngularJS Foundations</h1>
                    <h2>Workshop</h2>
                    <p>
                    <small>15. Juni 2015</small>
                    </p>
                    <div class="footer">
                    <p>
                    Stefan Zollinger • Emil Effila • Stefano Manco • Mato Illic
                    </p>


                        <ul>
                            <li>Consulting.</li>
                            <li>Design.</li>
                            <li>Agile Projects.</li>
                            <li>Products.</li>
                            <li>Innovation Hosting.</li>

                        </ul>

                        
                    </div>
                </section>
                <section>
                    <h2>Warum dieser Kurs?</h2>
                </section>

                <section>
                    <h2>
                        Einstieg in AngularJS ist zwar einfach, aber...
                    </h2>
                    <ul>
                        <li class="fragment">Keine (offiziellen) Konventionen
<li class="fragment">Viele verschiedene Ansätze im Netz
<li class="fragment">AngularJS beinhaltet viel <br>  "Magic" der man nicht blind vertrauen sollte
                    </ul>
                </section>

                <section>
                    <h2>Ziele</h2>
                    <li class="fragment">Guidelines und Struktur geben
                    <li class="fragment">AngularJS Konzepte und deren Anwendungen klären
                    <li class="fragment">"Magische" Teile von AngularJS durchleuchten

                </section>


                <section>
                    <h2>Setup Workshop Projekt</h2>
                    <p>
                        Schritte um das Projekt zu installieren:
                    </p>
                    <pre>
                        <code class="bash">
$ git clone https://github.com/matoilic/AngularWorkshop 
$ npm install
$ gulp
                        </code>
                    </pre>
                </section>

                <section>
                     <h2>Übersicht Workshop Projekt</h2>
                     <ul>
                         <li>Abhängigkeiten
                         <li>Verzeichnisstrutkur
                         <li>Build System
                     </ul>
                </section>
                <section>
                    <h2>Abhängigkeiten (npm)</h2>
                    <p>
                    Definiert in package.json:
                    </p>
                    <pre>
                        <code class="json">
{
  "name": "my-package",
  "description": "An example package",
  "version": "0.0.1",
  "dependencies": {
    "gulp": "^3.8.11",
    "gulp-connect": "^2.2.0",
  },
  "devDependencies": {
    "angular": "^1.4.0",
    "angular-resource": "^1.4.0",
    "angular-ui-router": "^0.2.15",
    "normalize.css": "^3.0.3"
  }
}

                         </code>
                     </pre>

                    <aside class="notes">
dependencies => Laufzeitabhängigkeiten (z.B. Angular oder Bootstrap)<br>
devDependencies => Abhängigkeiten für Entwicklung (z.B. Gulp oder Karma)<br>
Verwaltung mittels NPM CLI


                    </aside>
                </section>

                <section>
                    <h2>Top Level Struktur</h2>
                    <pre>
                           <code class="bash">
data/           
gulpfile.js/   
node_modules/
src/
.git/
.gitignore
.jshintrc
.editorconfig
package.json
protractor.conf.js
favicon.ico        
index.html         

                           </code>
                       </pre>

                       <aside class="notes">
                           - Struktur ist ähnlich bei den meisten modernen Frontend Projekten<br><br>
                           Kurz erklären was warum.
                       </aside>

                </section>
                <section>
                    <h2>AngularJS Struktur</h2>
                    <pre>
                           <code class="bash">
components/
    /address-book/
    /application/
    /welcome-state/index.js
               /welcome-state.js
               /welcome-controller.js
               /welcome.html
images/
stylesheets/

                           </code>
                       </pre>

                       <aside class="notes">
                           Kurz erklären was warum.
                       </aside>

                </section>

                <section>
                    <h2>Standard Projektstruktur</h2>
                    <pre>
                           <code class="bash">
/controllers/home-controller.js
            /other-controller.js
            /even-more-controller.js
/services/home-service.js
         /other-service.js
         /3rd-service.js
/views/home.html
      /other.html
      /more-templates.html
                           </code>
                       </pre>

                       <p>
                       <img width="200" height="200" src="http://cdn.meme.am/instances/500x/11541951.jpg">
                       </p>


                </section>


                <section>
                       <h2>
                       Vorteile fachlicher Aufteilung
                       </h2>
                       <ul class="small">
<li>Besser skalierbar
<li>Bessere Wartbarkeit, weil Code einfacher zu finden ist
<li>Oft zusammen verwendete Dateien sind näher beieinander
<li>Komponenten eines Moduls sind auf einen Blick ersichtlich

</ul>

                </section>
                <section>
                    <h2>Build System: Gulp</h2>
                    <p>
                        gulpfile.js
                    </p>
                    <ul>
                    <li>
                    Default Task:
                    <ul>
                        <li><strong>connect:</strong> Startet Server</li>
                        <li><strong>watch:</strong> Überwacht Dateiänderungen und lädt die Seite neu
                    </ul>
                    </li>
                    <li>"test" Task:
                    <ul>
                        <li><strong>test:</strong> Startet Protractor end-to-end Tests
                    </ul>
                    </li>
                        
                    </ul>

                </section>

                <section>
                    <h2>AngularJS im Überblick</h2>
                    <img src="/img/ng-arch.svg">
                </section>

                <section>
                    <h2>Module:<br>
                    Sammlungen von AngularJS Objekten
                </section>

                <section>
<h2>Neues Modul definieren:</h2>
<pre>
                           <code class="javascript">
angular.module('myApp', []);
</code>
</pre>

<h2>Modul 'myApp' referenzieren</h2>
<pre>
                           <code class="javascript">
angular.module('myApp');
</code>
</pre>

                </section>

                <section>
                    <h2>Modul-Laufzeit</h2>
                    <pre>
                           <code class="javascript">
angular
    .module('myModule', ['ui-router'])
    .config(function($stateProvider){})
        .run(initializationFn)
        .provider('myProvider', function(){})
        .controller('myController', '')
                           </code>
                       </pre>
                       <p>
                       Ablauf
                       </p>
                       <ul>
<li>Modul wird mit Dependency 'ui-router'  initialisiert
<li>config() wird ausgeführt
<li>run() wird ausgeführt

                       </ul>


                </section>


                <section>
                    <h2>Dependency Injection</h2>
                    <ul>
<li class="fragment">Injector bietet einen Weg Module nach Namen zu referenzieren
                    <li class="fragment">Jede AngularJS App hat einen Injector
<li class="fragment">Jedes Modul wird nur einmal instanziert
<li class="fragment">Injector löst Dependencies in Funktionen auf:
</ul>

<pre class="fragment">
    <code class="javascript">
function MyService(DependencyA, DependencyB) {
// Do something with DependencyA
  DependencyA.doSomething();
}
    </code>
</pre>


                </section>
                <section>
                    <h2>Dependency Injection</h2>
                    <ul>
                    <li><strong>Achtung:</strong> Automatische DI funktioniert nur solange der Code nicht minifiziert ist.
<li><strong>Besser:</strong> Dependencies explizit angeben:
</ul>

<pre>
    <code class="javascript">
function MyService(DependencyA) {};

angular.module('myApp')
    .service('MyService', ['DependencyA', MyService]);

    </code>
</pre>


                </section>
<section>
<h2>Tipp: Mit 'ngStrictDi' explizite DI Annotationen forcieren:</h2>
<pre>
    <code class="html">
&lt;body ng-app="myApp" ng-strict-di&gt;
</code>
</pre>

</section>

<section>
<h2>Views (Templates)</h2>
<p>
HTML Files:
</p>
<pre>
    <code type="html">
        <h1>Address book</h1>

        <p>
          Hello World.
        </p>

    </code>
</pre>
</section>

<section>
    <h2>Routing</h2>
    <ul>
    Verbindet HTML Template mit URL</ul>
</section>
<section>
<h2>Beispiel einer Route:</h2>
<pre>
<code type="javascript">
angular.module('address-directory')
.config(['$stateProvider', function($stateProvider) {
    $stateProvider
        .state('contactList', {
            url: '/contact-list'
            templateUrl: 'contact-list.html'
        });
}]);
</code>
</pre>
</section>
<section class="hands-on" data-state="hands-on" >
    <h2>Übung</h2>
    
        <h3>Neue Route für Kontaktliste erstellen. </h3>
        <ul>
    <li>Neues Modul ContactList (analog 'Welcome') erstellen
    <li>View Template: contact-list.html
    <li>Route: (http://localhost:8088/#/contact-list/)

    </ul>
    <p>
    <img width="200" height="200" src="http://cdn.meme.am/instances/500x/57106019.jpg">
    </p>

</section>

<section>
    <h2>ng-route vs ui-router</h2>
    <ul >
    <li class="fragment">
        <h3>ng-route</h3>
        <ul>
        <li>Angular Default
        <li>Erlaubt einfache Routes
        </ul>
    </li>
    <li class="fragment">
        <h3>ui-router</h3>
    <ul>
    <li>Kann verschachtelte Views darstellen und komplexe States abbilden
    <li>De-facto Standard
    </ul>
    </li>
    </ul>
    <h3 class="fragment">In diesem Workshop: ui-router only.</h3>

</section>


<section>
<h2>Directives</h2>
<ul>
<li class="fragment">Wiederverwendbare GUI Elemente
<li class="fragment">Erweiterte HTML Tags bzw. Web Components (HTML6)
<li class="fragment">Darf DOM Manipulationen machen
<li class="fragment">Kann HTML Elemente mit neuem Verhalten erweitern
</ul>
</section>


<section>
<h2>Beispiele für Direktiven:</h2>
<div class="fragment">
<h3>ng-model</h3>
<pre>
<code type="html">
<input type="text" name="searchTerm" ng-model="searchTerm"/>
<p>{{ searchTerm }}</p>
</code>
</pre>
</div>

<div class="fragment">
<h3>ng-class</h3>
<pre>
<code type="html">
<input type="text" name="searchTerm" 
ng-class="{'field-error': testForm.searchTerm.$error.required}"
ng-model="searchTerm"  required />
</code>
</pre>
</div>

<div class="fragment">
<h3>ng-if</h3>
<pre>
<code type="html">
<p ng-if="isShown">Content goes here.</p>
</code>
</pre>
</div>

</section>

<section data-state="hands-on" data-markdown>
##Übung

* Füge der contact-list View ein Input Feld hinzu.
* Verwende <code>ng-model</code> um den Input einer Variable zuzuweisen.
* Gib die Variable auf der Seite aus

### Bonus

* Falls der Input Wert 'spin' ist, soll dem Element eine CSS Klasse mit dem Namen 'spin' hinzugefügt werden (Tipp: ng-class) 



</section>

<section>
<h2>Controller</h2>
<h3>Controller stellen der View Funktionen zur Verfügung und repräsentieren den State der View.</h3>
</section>

<section>
<h2>Was nicht in den Controller gehört
</h2>
<ul>
<li class="fragment"><strong>DOM Manipulation.</strong> In den meisten Fällen wird die View durch Data-Binding manipuliert. Manuelle Änderungen am HTML werden durch Direktiven abgekapselt.
<li class="fragment"><strong>Output formatieren und filtern.</strong> Dazu sind AngularJS Filter da
<li class="fragment"><strong>State mit anderen Controllern teilen.</strong> Dafür gibt es die AngularJS Services

</ul>
</section>

<section>
<h2>Controller definieren</h2>
<pre>
<code class="javascript">
function ContactListController($scope, contacts) {
    $scope.contacts = contacts;
}

angular.module('ContactList', [])
    .controller('ContactListController', 
                ['$scope', 'contacts', 'ContactListController]);

</code>
</pre>
</section>

<section>
<h2>Controller einer View zuweisen</h2>
<pre>
<code class="javascript">
angular.module('ContactList').config(['$stateProvider',
  function($stateProvider') {
    $stateProvider'.
      state('contact-list', {
        url: '/contact-list',
        templateUrl: 'contact-list.html'
        controller: 'ContactListController'
      });
  }]);
</code>
</pre>
</section>

<section data-state="hands-on">
<h2>Übung</h2>
<ul>
<li>Erstelle einen neuen Controller 'ContactListController' im Modul ContactList 
<li>Definiere einen Array mit den Namen der Kontakte 
<li>Liste diese Namen in der View auf. (siehe: ng-repeat Direktive)
</ul>
</section>

<section>

<h2>Filters</h2>
<ul>
<li class="fragment">Transformiert Objekte im View Template
<li class="fragment">Ist Chainable durch den Pipe Separator
</ul>
<div class="fragment">
<p>
Beispiel:
</p>
<pre>
<code type="html">
<p>
  {{ 1434098007198 | date:'shortDate' }}
</p>
</code>
</pre>
</div>

</section>

<section data-state="hands-on" data-markdown>
## Übung

Verwende den AngularJS Filter "filter" um die Kontaktliste nach dem Wert aus Suchfeld zu filtern.

### Bonus

Erstelle einen Filter, der den ersten Buchstaben eines Strings immer gross ausgibt.

Es gibt keine “capitalize” Funktion in Javascript, deshalb hier der Code:

``` javascript
var myString = 'angular';
myString.charAt(0).toUpperCase() + myString.substring(1);
// Prints 'Angular'
```
</section>

<section>
<h2>Formulare &amp; Validierung</h2>
<pre><code class="html">
<form name="form" novalidate>
    E-mail:
    <input type="email" ng-model="user.email" 
      name="fieldEmail" required />
    <br />
    <div ng-show="form.$submitted || form.fieldEmail.$touched">
      <span ng-show="form.fieldEmail.$error.required">
        Tell us your email.
        </span>
      <span ng-show="form.fieldEmail.$error.email">
        This is not a valid email.
        </span>
    </div>
   <button type="submit" ng-disabled="!form.$valid">Submit</button>
</form>

</code></pre>

</section>


<section data-state="hands-on">
<h2>Übung</h2>
<ul>
<li>Erstelle eine Detailseite für einen Kontakt
<li>Formularfelder für 
<ul>
<li>Name
<li>Email
<li>Telefonnummer
</ul>
<li>Validiere den Namen (required) und die E-Mail (korrekte E-Mail Adresse)
</ul>
</section>

<section>
<h2>Scopes</h2>
<ul>
<li>Verbindung zwischen Controller und View
<li>Scope == View Model
<li>Enthält den State der View
</ul>
</section>

<section>
<h2>Scope-Funktionen</h2>
<dl>
<dt>$watch
<dd>wird bei Veränderungen einer Variable im Scope ausgeführt
<dt>$emit
<dd>Sendet einen Event die Hierarchie aufwärts bis zum $rootScope
<dt>$broadcast
<dd>sendet einen Event die Hierarchie abwärts vom Sendescope aus
$on
</dl>
</section>

<section>
<h2>Events</h2>
<img src="/img/events.svg">

</section>

<section>
<h2>Scope Vererbung</h2>
<dl>
<dt>$rootScope
<dd>Parent aller Scopes
<dd>Alle Scopes erben prototypisch von $rootScope
<dd><br><br>
<dd>Wenn die Variable {{ name }} aufgelöst wird, sucht Angular zuerst im aktuellen Scope nach 'name' und falls es nicht vorhanden ist, in der Hierarchie aufwärts bis zum $rootScope
</dl>

</section>

<section>
<h2>Scope Isolation</h2>
<ul>
<li>Betrifft Direktiven
<li>Der isolierte Child Scope verändert den Parent Scope nicht (ng-if, ng-switch, ng-repeat, ng-view, ng-include)
<li> Primitives die an eine Direktive mit isoliertem Scope übergeben werden, verlieren das 2-way Binding
</ul>
</section>

<section>
<h2>Scopes</h2>
<img src="/img/concepts-scope.png">
</section>

<section>
<h2>Data Binding</h2>
<dl>
<dt>View</dt>
<dd>{{aDate|date:simple}}
<dt>Controller</dt>
<dd>$scope.aDate = new Date();
<dd><br><br>
<dd>Angular kümmert sich automatisch um die Synchronisation zwischen den Daten in HTML und JavaScript und zwar in beide Richtungen. Falls etwas in JS geändert wird, zieht es Angular für das HTML nach und umgekehrt.
</dl>
</section>
<section>
<h2>Controller, Scope und controllerAs</h2>
<p>Es gibt zwei Varianten wie Controller und Scopes eingesetzt werden können.
<dl><dt class="fragment">
Standard:</dt>
<dd class="fragment">Variablen und Methoden werden direkt auf dem Scope definiert
<dt class="fragment"> 'controllerAs'</dt>
<dd class="fragment"> Syntax: Controller wird als eigenes Objekt an das Scope übergeben. Variablen und Methoden werden auf dem Controller definiert.
</dl>
</section>

<section>
<h2>Beispiel</h2>
<p>Route Definition:</p>
<pre>
<code type="javascript">
angular.module('address-directory').config(['$stateProvider',
  function($stateProvider') {
    $stateProvider'.
      state('address-list', {
        controller: 'AddressListController as addressList'
  }]);
</code>
</pre>
<p>View:</p>
<pre>
<code type="html">
<ul>
    <li ng-repeat="contact in addressList.contacts">{{ contact.name }}</li>
</ul>
</code>
</pre>
</section>
<section>
<h2>Vorteile von 'controllerAs'</h2>
<ul>
<li class="fragment">Controller können eindeutig identifiziert werden, wenn es für ein Element mehrere gibt
<li class="fragment">Erlaubt es die Controller als Klassen zu nutzen auf deren Properties man in der View Zugriff hat
<li class="fragment">Weil immer ein '.' in den Bindings ist, verliert man es bei Direktiven mit isoliertem Scope nicht
</ul>
<h3 class="fragment">Empfehlung: controllerAs verwenden</h3>
</section>

<section data-markdown>
## URL Parameter (ui-router)

Definition von URL Parametern im State:

``` javascript
return $stateProvider
    .state('contactDetail', {
        url: '/detail/:name'
        /* ... */
    });
```

$stateParams Service stellt die definierten Parameter im Controller zur Verfügung:

``` javascript
function MyController($stateParams) {
    this.name = $stateParams.name;
}

```

</section>

<section data-state="hands-on" data-markdown>
## Übung

* Erstelle einen Controller für die Detail-View mit controllerAs Notation
* Verlinke den Kontakt aus der Liste mit der Detailansicht. Verwende dafür die URL Parameter von ui-router.
* Die Route sollte so aussehen: /detail/:name

</section>

<section>
<h2>Provider</h2>
<p>Was ist ein Provider in AngularJS? 
</p>
<p>
AngularJS Provider (oder Services) sind Singleton Objekte, die spezifische Funktionalitäten zur Verfügung stellen und Applikationslogik enthalten.
</p>
</section>

<section>
<h2>AngularJS Service Typen</h2>
<ul>
<li>Provider
<li>Factory
<li>Service
<li>Value
<li>Constant
</ul>

</section>

<section>
<h2>Provider</h2>
<ul>
<li class="fragment">Parent der anderen Service Typen (ausser Constant)
<li class="fragment">Konfigurierbar
<li class="fragment">DI Abhängigkeiten im Provider Konstruktor können nur andere Provider oder Constants sein
<li class="fragment">Beispiel: $stateProvider, $http
</ul>
</section>

<section>
<h2>Provider Beispiel</h2>
<pre><code class="javascript">
myApp.provider('myProvider', function() {

  return {
    $get: function() {
      var timeout = 8000; // Private variable
      function getTimeout() {
        return timeout;
      }

      return {
        variable: 'This is public',
        getTimeout: getTimeout
      };
    }
  };
});

</code></pre>
</section>

<section>
<h2>Provider Beispiel (konfigurierbar)</h2>
<pre><code class="javascript">
app.provider('myConfigurableProvider', function() {
  var timeout = 8000;

  return {
    setTimeout: function(timeoutInMilliseconds) {
      timeout = timeoutInMilliseconds;
    },
    $get: function() {
        /* same as last slide*/
    }
  };
});
/* … */
app.config(function(myConfigurableProvider) {
  myConfigurableProvider.setTimeout(5000);
});

</code></pre>
</section>

<section>
<h2>Factory</h2>
<p>Wie Provider, aber ohne Konfiguration
</p>
</section>


<section>
<h2>Factory Beispiel</h2>
<pre><code class="javascript">
app.factory('myService', function() {
  var thisIsPrivate = 'Private';
  function getPrivate() {
    return thisIsPrivate;
  }

  return {
    variable: 'This is public',
    getPrivate: getPrivate
  };
});
</code></pre>
</section>

<section>
<h2>Service</h2>
<p>Wie Factory, aber anstatt einem Objekt definieren wir eine Funktion, die mit 'new' instanziert wird.
</p>
</section>

<section>
<h2>Service Beispiel</h2>
<pre><code class="javascript">
app.service('foo', function() {
  var thisIsPrivate = 'Private';
  this.variablea= 'This is public';
  this.getPrivate = function() {
    return thisIsPrivate;
  };
});
</code></pre>
</section>

<section>
<h2>Value</h2>
<p>Einfache Werte</p>
<pre><code class="javascript">
angular.module('myApp').value('httpTimeout', 3000);
</code></pre>
</section>

<section>
<h2>Constant</h2>
<ul>
<li class="fragment">Wie Values, aber als DI Abhängigkeiten in der Konfigurationsphase verwendbar
<li class="fragment">Ideal für Konfigurationswerte, umgebungsabhängige Variablen usw.
<li class="fragment">Good to know: Constants können trotz des Namens geändert werden
</ul>
</section>

<section>
<h2>Constant Beispiel</h2>
<pre><code class="javascript">
angular.module('myApp').constant('apiBasePath', 'https://myhost/api/v1/');

// Wert kann auch ein Javascript Objekt sein:
angular.module('myApp').constant('apiSettings', {basePath: 'https://myhost/api/', version: 'v1'  });

</code></pre>
</section>

<section data-state="hands-on" data-markdown>
## Übung

* Erstelle einen Service "ContactsService" mit der Methode “fetchContacts” der die Inhalte der Kontaktliste unter /data/contacts.json zurückgibt.
* Verwende dafür den Angular Service $http
* Ersetze die statische Kontaktliste mit der neuen aus dem Service

### Bonus: 

* Mach den Pfad zum JSON File konfigurierbar (AngularJS Constant)
</section>

<section>
<h2>Testing</h2>
<ul>
<li>End to end Testing mit Protractor
<li>Tests laufen gegen die Applikation im Browser
<li>Macht das Testen von User Interaktionen möglich
</ul>
</section>

<section>
<h2>Setup Testing</h2>
<p>Protractor installieren</p>
<pre><code class="bash">
npm install -g protractor
</code></pre>

<p>Selenium installieren &amp; starten</p>
<pre><code class="bash">
webdriver-manager update
webdriver-manager start
</code></pre>

</section>

<section>
<h2>Beispiel Protractor Test</h2>
<pre><code class="javascript">
describe('Angular Workshop Address Book', function() {
  it('should show a contact detail page when a contact was selected', function() {
    browser.get('http://localhost:8088/');
    element(by.model('contacts').get(1).click();;
    
    expect(x).toBe(y);
  });
});
</code></pre>
</section>


<section data-state="hands-on">
<h2>Übung</h2>
<p>
Erstelle einen Protractor Test, der sicher stellt, dass die Kontaktliste korrekt gefiltert wird.
</section>

<section>
<h2>Custom Directives</h2>
</section>

<section>
<h2>Directive Definition Object</h2>
<pre><code class="javascript small">
myModule.directive('directiveName', function factory(injectables) {
  var directiveDefinitionObject = {
    priority: 0,
    template: '<div></div>',
    transclude: false,
    restrict: 'A',
    scope: false,a
    controller: function($scope, $element, $attrs, $transclude, otherInjectables) { ... },
    controllerAs: 'stringIdentifier',
    bindToController: false,
    require: 'siblingDirectiveName', // or // ['^parentDirectiveName', '?optionalDirectiveName', '?^optionalParent'],
    compile: function compile(tElement, tAttrs, transclude) {
    }
  };
  return directiveDefinitionObject;
});
</code></pre>

</section>

<section>
<h2>Directive Definition Object: Scope</h2>
<pre><code class="javascript ">
scope: {
   'myProperty': '=',
   'otherProperty': '&amp;',
   'someAttribute': '@'
}
</code></pre>

</section>

<section>
<h2>Beispiel Direktive</h2>
<pre><code class="javascript ">
myModule.directive('mouseInteraction', function factory(injectables) {
  var mouseInteractionDirective = {
    template: '<div></div>',
    restrict: 'A',
    link: function ($scope, element) {
            element.bind('click', function () {
                element.html('You clicked me!');
            });
            element.bind('mouseenter', function () {
                element.css('background-color', 'yellow');
            });
            element.bind('mouseleave', function () {
                element.css('background-color', 'white');
            });
        }
 };
  return mouseInteractionDirective;
});
</code></pre>
</section>

<section>
<h2>Laufzeit von Direktiven</h2>
<img src="/img/directive-runtime.png">
</section>

<section data-state="hands-on">
<h2>Übung</h2>
<p>
In der Kontaktliste soll jeder Kontakt ein automatisch generiertes Profilbild von Robohash.org erhalten. 
Erstelle eine neue Direktive, die Anhand der E-Mail Adresse ein Bild ausgibt. 
<br><br>
API Robohash: 
<pre><code>
<img ng-src="https://robohash.org/{{ email }}" > 
</code></pre>
</p>
</section>

<section>
<h2>Performance</h2>
</section>

<section>
<h2>Performance Tipps Produktionsumgebung</h2>
<pre><code>

angular.module('myApp')
    .config(['$logProvider','$compileProvider',function($logProvider, $compileProvider){
    $logProvider.debugEnabled(false);
    $compileProvider.debugInfoEnabled(false);
}]);

</code></pre>
</section>

<section>
<h2>Performance Tipps für ng-model</h2>
<p>
Definiere wie oft ein $digest Cycle getriggert wird<br><br>

<strong>ng-model-options</strong>
</p>
<pre><code>
{
  'updateOn': blur',
  'debounce': {
    'default': 500, 
    'blur': 0
  }
}

</code></pre>
</section>
<section>

<h2>Performance Tipps für Data-Bindings</h2>
<p>
<strong>Two-way binding nur verwenden wo es wirklich nötig ist. 
</strong>
<br><br>
Ansonsten:
<pre><code>
{{ ::contact.name }}
</code></pre>
</section>

<section>
<h2>Performance Tipps für ng-repeat</h2>
<p>
ng-repeat immer mit track-by verwenden.
ng-hide verwenden um gefilterte DOM Elemente
<br>
<br>
=> ng-repeat entfernt und kreiert die DOM Nodes bei jedem Refresh
</p>
</section>

<section>
<h2>Fragen?</h2>
<img src="http://s2.quickmeme.com/img/51/519a00e0cfdbbd288fad0cd62a8e603444b15dc3fe819828c37d18be41cfcffa.jpg">
</section>

<section>
<h2>Vielen Dank!</h2>
</section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration


var cblocks = document.querySelectorAll("pre code");
                
    if(cblocks.length) {
        for(var i=0, len=cblocks.length; i<len; i++) {
            var dom = cblocks[i];
            var html = dom.innerHTML;
            html = html.replace(/</g,"&lt;").replace(/>/g,"&gt;");
            dom.innerHTML = html;
        }
    }

            Reveal.initialize({
                controls: true,
                progress: false,
                history: true,
                center: true,

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() {
                     hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

    </body>
</html>
